import{z as A,A as y,B as m,C as L,D as E,E as R,F as g,G as M,H as B,I as N,J as k,K as Y,L as w,M as F,N as x,O as C,P as U,Q as T,R as $,S as z,T as G,a as S,U as H,b as Z,V as j,W as q,X as J,l as K,Y as Q,Z as V,_ as W,$ as X,a0 as ee,e as te,j as se,a1 as ae,a2 as re}from"./AHAO7SM2.js";import{c as ie}from"./BQfjX8o1.js";class ne{anchor;#t=new Map;#s=new Map;#e=new Map;#a=!0;constructor(e,s=!0){this.anchor=e,this.#a=s}#r=()=>{var e=A;if(this.#t.has(e)){var s=this.#t.get(e),t=this.#s.get(s);if(t)y(t);else{var i=this.#e.get(s);i&&(this.#s.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[n,r]of this.#t){if(this.#t.delete(n),n===e)break;const a=this.#e.get(r);a&&(m(a.effect),this.#e.delete(r))}for(const[n,r]of this.#s){if(n===s)continue;const a=()=>{if(Array.from(this.#t.values()).includes(n)){var u=document.createDocumentFragment();B(r,u),u.append(E()),this.#e.set(n,{effect:r,fragment:u})}else m(r);this.#s.delete(n)};this.#a||!t?L(r,a,!1):a()}}};#i=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[t,i]of this.#e)s.includes(t)||(m(i.effect),this.#e.delete(t))};ensure(e,s){var t=A,i=N();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(i){var n=document.createDocumentFragment(),r=E();n.append(r),this.#e.set(e,{effect:R(()=>s(r)),fragment:n})}else this.#s.set(e,R(()=>s(this.anchor)));if(this.#t.set(t,e),i){for(const[a,f]of this.#s)a===e?t.skipped_effects.delete(f):t.skipped_effects.add(f);for(const[a,f]of this.#e)a===e?t.skipped_effects.delete(f.effect):t.skipped_effects.add(f.effect);t.oncommit(this.#r),t.ondiscard(this.#i)}else g&&(this.anchor=M),this.#r()}}function de(d,e,s=!1){g&&Y();var t=new ne(d),i=s?w:0;function n(r,a){if(g){const u=F(d)===x;if(r===u){var f=C();U(f),t.anchor=f,T(!1),t.ensure(r,a),T(!0);return}}t.ensure(r,a)}k(()=>{var r=!1;e((a,f=!0)=>{r=!0,n(f,a)}),r||n(!1,null)},i)}function ue(d,e,s,t){var i=!K||(s&Q)!==0,n=(s&V)!==0,r=(s&re)!==0,a=t,f=!0,u=()=>(f&&(f=!1,a=r?te(t):t),a),_;if(n){var I=X in d||ee in d;_=$(d,e)?.set??(I&&e in d?c=>d[e]=c:void 0)}var o,P=!1;n?[o,P]=ie(()=>d[e]):o=d[e],o===void 0&&t!==void 0&&(o=u(),_&&(i&&z(),_(o)));var h;if(i?h=()=>{var c=d[e];return c===void 0?u():(f=!0,c)}:h=()=>{var c=d[e];return c!==void 0&&(a=void 0),c===void 0?a:c},i&&(s&G)===0)return h;if(_){var O=d.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||O||P)&&_(v?h():c),c):h()})}var b=!1,l=((s&ae)!==0?se:J)(()=>(b=!1,h()));n&&S(l);var D=j;return(function(c,v){if(arguments.length>0){const p=v?S(l):i&&n?H(c):c;return Z(l,p),b=!0,a!==void 0&&(a=p),c}return W&&b||(D.f&q)!==0?l.v:S(l)})}export{ne as B,de as i,ue as p};
